<div class="card">
    <div class="m-4">
        <p-button class="float-end" [rounded]="true" label="Crear Usuario" [raised]="true" severity="secondary"
            (click)="showDialogCreate()"></p-button>
    </div>
    <div class="card m-4">
        <p-table [value]="customers" styleClass="p-datatable-striped" [paginator]="true" [rows]="8"
            [showCurrentPageReport]="true" [tableStyle]="{ 'min-width': '50rem' }"
            currentPageReportTemplate="{first} de {last} de {totalRecords} registros"
            [rowsPerPageOptions]="[8, 10, 20, 30]">
            <ng-template pTemplate="header" class="bg-dark">
                <tr>
                    <th>Usuario</th>
                    <th>Nombre</th>
                    <th>Correo</th>
                    <th>Documento</th>
                    <th>Fecha Creación</th>
                    <th>Acciones</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-customer>
                <tr>
                    <td style="font-size: 13px">{{ customer.name }}</td>
                    <td>{{ customer.country.name }}</td>
                    <td>{{ customer.company }}</td>
                    <td>{{ customer.representative.name }}</td>
                    <td>{{ customer.representative.name }}</td>
                    <td>
                        <a (click)="showDialogEdit()"><i class="m-2 feather icon-edit"></i></a>
                        <a (click)="showDialogCreate()"><i class="m-1 feather icon-trash-2"></i></a>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>


<p-dialog header="Crear Usuario" [(visible)]="visibleCreate" [style]="{width: '45vw'}">
    <form [formGroup]="formCreateUser" (ngSubmit)="enviarFormulario()">
        <div class="container row">
            <div *ngIf="isVisibilityMenssageCreate" class="col-md-12 alert alert-secondary alert-dismissible"
                style="font-size: 0.81rem;" role="alert">
                Todos los campos con (*) son obligatorios.
                <button type="button" class="btn-close" (click)="showVisibilityMenssageCreate()" data-bs-dismiss="alert"
                    aria-label="Close"></button>
            </div>

            <div class="col-md-4 mb-3">
                <label for="inputName" class="col-sm-2 col-form-label">Nombre(*)</label>
                <div class="col-sm-12">
                    <input type="text" formControlName="name" class="form-control" id="inputName">
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputLastName" class="col-sm-2 col-form-label">Apellido(*)</label>
                <div class="col-sm-12">
                    <input type="text" formControlName="lastName" class="form-control" id="inputLastName">
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputUsername" class="col-sm-2 col-form-label">Usuario(*)</label>
                <div class="col-sm-12">
                    <input type="text" formControlName="username" class="form-control" id="inputUsername">
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputEmail" class="col-sm-2 col-form-label">Correo(*)</label>
                <div class="col-sm-12">
                    <input type="email" formControlName="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                        class="form-control" id="inputEmail">
                </div>
            </div>

            <div class="col-md-4 mb-3">
                <label for="inputGender" class="col-sm-2 col-form-label">Género</label>
                <div class="col-sm-12">
                    <select class="form-select" formControlName="gender" aria-label="Default select example"
                        id="inputGender">
                        <option selected>Open this select menu</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                    </select>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputPassword" class="col-sm-2 col-form-label">Rol(*)</label>
                <div class="col-sm-12">
                    <select class="form-select" formControlName="role">
                        <option selected>Open this select menu</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                    </select>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputDocument" class="col-sm-2 col-form-label">Número Documento(*)</label>
                <div class="col-sm-12">
                    <input type="text" formControlName="document" class="form-control" id="inputDocument">
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputFirsthDate" class="col-sm-2 col-form-label">Fecha Nacimiento</label>
                <div class="col-sm-12">
                    <div class="input-group">
                        <input formControlName="birthDate" class="form-control" placeholder="yyyy-mm-dd" name="dp"
                            ngbDatepicker #d="ngbDatepicker" id="inputFirsthDate" />
                        <button class="btn button-calendar  bi bi-calendar3" (click)="d.toggle()" type="button"><i
                                class="feather icon-calendar text-secondary"></i></button>
                    </div>
                </div>
            </div>
        </div>


        <!-- <div>
            <label for="correo">Correo:</label>
            <input type="email" id="correo" formControlName="correo">
            <div *ngIf="formulario.get('correo')!.hasError('required')">
                Correo es obligatorio.
            </div>
            <div *ngIf="formulario.get('correo')!.hasError('email')">
                Ingresa un correo válido.
            </div>
        </div> -->

        <div class="border-top">
            <div class="m-3">
                <p-button type="submit" class="float-end mx-4" [rounded]="true" label="Guardar" severity="secondary"
                    [disabled]="formCreateUser.invalid" size="small"></p-button>

                <p-button class="float-end" label="Cancelar" severity="secondary" size="small"
                    (onClick)="closeDialogCreate()"></p-button>
            </div>
        </div>
    </form>
</p-dialog>


<p-dialog header="Actualizar Usuario" [(visible)]="visibleEdit" [style]="{width: '45vw'}">
    <form [formGroup]="formEditUser" (ngSubmit)="enviarFormulario()">
        <div class="container row">
            <div *ngIf="isVisibilityMenssageEdit" class="col-md-12 alert alert-secondary alert-dismissible"
                style="font-size: 0.81rem;" role="alert">
                Todos los campos con (*) son obligatorios.
                <button type="button" class="btn-close" (click)="showVisibilityMenssageEdit()" data-bs-dismiss="alert"
                    aria-label="Close"></button>
            </div>

            <div class="col-md-4 mb-3">
                <label for="inputName" class="col-sm-2 col-form-label">Nombre(*)</label>
                <div class="col-sm-12">
                    <input type="text" formControlName="name" class="form-control" id="inputName">
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputLastName" class="col-sm-2 col-form-label">Apellido(*)</label>
                <div class="col-sm-12">
                    <input type="text" formControlName="lastName" class="form-control" id="inputLastName">
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputUsername" class="col-sm-2 col-form-label">Usuario(*)</label>
                <div class="col-sm-12">
                    <input type="text" formControlName="username" class="form-control" id="inputUsername">
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputEmail" class="col-sm-2 col-form-label">Correo(*)</label>
                <div class="col-sm-12">
                    <input type="email" formControlName="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                        class="form-control" id="inputEmail">
                </div>
            </div>

            <div class="col-md-4 mb-3">
                <label for="inputGender" class="col-sm-2 col-form-label">Género</label>
                <div class="col-sm-12">
                    <select class="form-select" formControlName="gender" aria-label="Default select example"
                        id="inputGender">
                        <option selected>Open this select menu</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                    </select>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputPassword" class="col-sm-2 col-form-label">Rol(*)</label>
                <div class="col-sm-12">
                    <select class="form-select" formControlName="role">
                        <option selected>Open this select menu</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                    </select>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputDocument" class="col-sm-2 col-form-label">Número Documento(*)</label>
                <div class="col-sm-12">
                    <input type="text" formControlName="document" class="form-control" id="inputDocument">
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputFirsthDate" class="col-sm-2 col-form-label">Fecha Nacimiento</label>
                <div class="col-sm-12">
                    <div class="input-group">
                        <input formControlName="birthDate" class="form-control" placeholder="yyyy-mm-dd" name="dp"
                            ngbDatepicker #d="ngbDatepicker" id="inputFirsthDate" />
                        <button class="btn button-calendar  bi bi-calendar3" (click)="d.toggle()" type="button"><i
                                class="feather icon-calendar text-secondary"></i></button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <label for="inputStatus" class="col-sm-2 col-form-label">Estado(*)</label>
                <div class="mt-3">
                    <p-selectButton [options]="statusUserOpctions" optionValue="value" formControlName="enabled" optionLabel="icon">
                        <ng-template let-item pTemplate>
                            <i [class]="item.icon"></i>
                        </ng-template>
                    </p-selectButton>
                </div>

            </div>
        </div>
        <div class="border-top">
            <div class="m-3">
                <p-button type="submit" class="float-end mx-4" [rounded]="true" label="Guardar" severity="secondary"
                    size="small"></p-button>

                <p-button class="float-end" label="Cancelar" severity="secondary" size="small"
                    (onClick)="closeDialogEdit()"></p-button>
            </div>
        </div>
    </form>
</p-dialog>




<!-- <div class="col-md-4 mb-3">
    <label for="inputPassword" class="col-sm-2 col-form-label">Contraseña(*)</label>
    <div class="col-sm-12">
        <div class="row">
            <div class="input-group">
                <input type="{{ showPassword ? 'password' : 'text' }}" class="form-control" formControlName="password" aria-label="Input group example" aria-describedby="btnGroupAddon">
                <button class="btn button-calendar" (click)="visivilityPassword()">
                    <i *ngIf="!showPassword" class="feather icon-eye text-secondary"></i>
                    <i *ngIf="showPassword" class="feather icon-eye-off text-secondary"></i></button>
            </div>
        </div>  
    </div>
</div>
<div class="col-md-4 mb-3">
    <label for="inputConfirmPassword" class="col-sm-2 col-form-label">Confirmar Contraseña(*)</label>
    <div class="col-sm-12">
        <div class="row">
            <div class="input-group">
                <input type="{{ showPasswordConfirm ? 'password' : 'text' }}" class="form-control" formControlName="confirmPassword" aria-label="Input group example" aria-describedby="btnGroupAddon">
                <button class="btn button-calendar" (click)="visivilityPasswordConfirm()">
                    <i *ngIf="!showPassword" class="feather icon-eye text-secondary"></i>
                    <i *ngIf="showPassword" class="feather icon-eye-off text-secondary"></i></button>
            </div>
        </div> 
    </div>
</div> -->


  